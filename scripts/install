#!/bin/bash
# YunoHost-Helfer laden
source /usr/share/yunohost/helpers

# Argumente abrufen
ftp_server=$(ynh_app_setting_get --app=$app --key=ftp_server)
ftp_user=$(ynh_app_setting_get --app=$app --key=ftp_user)
ftp_password=$(ynh_app_setting_get --app=$app --key=ftp_password)
ftp_path=$(ynh_app_setting_get --app=$app --key=ftp_path)

# FTP-Daten pr√ºfen
if [ -z "$ftp_server" ] || [ -z "$ftp_user" ] || [ -z "$ftp_password" ] || [ -z "$ftp_path" ]; then
  ynh_die --message="FTP-Daten fehlen."
fi

# FTP installieren
ynh_package_update
ynh_package_install ftp

# Cronjob erstellen
ynh_add_config --template="../conf/cron_job" --destination="/etc/cron.d/$app"

# Erfolgsmeldung anzeigen
ynh_print_info --message="App erfolgreich installiert."
